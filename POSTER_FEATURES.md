# 海报核心能力追踪

## 已实现

- 画布管理：尺寸设置、清屏、保存/恢复、变换（平移/旋转/缩放）
- 基础图形：矩形/圆/线/多边形绘制，填充/描边/阴影/线型
- 文本绘制：字体样式、对齐、换行、最大行数、省略
- 图像绘制：加载、裁剪、圆角、旋转、透明度
- 导出能力：DataURL、Blob、ImageData
- Jest 单元测试：核心绘制与导出能力覆盖
- **图层系统**：支持 zIndex 排序、图层显隐、图层管理（添加/删除/获取）
- **高级填充**：支持线性/径向渐变、图案填充
- **二维码生成**：集成 qrcode 库，支持自定义样式与纠错等级
- **插件系统**：提供 onInit, beforeDraw, afterDraw 生命周期钩子
- **调试模式**：支持 debug 选项，自动绘制图层边界框
- **自动布局能力**：支持对齐（左/中/右/上/中/下）和分布（水平/垂直）
- **蒙版系统**：支持任意图层作为蒙版（mask）进行裁剪
- **高级图像处理**：支持滤镜（filter）、混合模式（globalCompositeOperation）、九宫格拉伸（scale9Grid）
- **富文本能力**：支持多样式文本片段（TextSpan）、字距控制（letterSpacing）、字体加载（loadFont）
- **性能与资源**：资源预加载与缓存（ResourceManager）、离屏渲染支持（OffscreenCanvas）、性能统计（渲染/加载耗时、图层数）
- **调试辅助**：支持网格（grid，可配置间距/颜色/线宽）、基准线（guides，支持水平/垂直/自定义样式）、图层边界框；通过 `debug` 选项细粒度控制
- **模板化渲染**：`TemplateRegistry` 支持注册/注销可复用图层模板（`TemplateFn`），通过 `createFromTemplate` 实例化并可施加坐标偏移
- **复杂文本排版**：竖排文本（`direction: 'vertical'`）、弧线路径文字（`drawTextOnArc`）、描边增强（`strokeColor`/`strokeWidth` 快捷属性）、横排字距精确控制（按字符逐一绘制）

## 已实现（平台）

- **Next.js 前端骨架**：packages/client 创建完成，支持 TypeScript 与 App Router
- **Kimi 接入**：后端路由封装 Kimi Chat Completions，请求安全落在服务端
- **四步流程 UI**：输入描述 → AI 输出 JSON → 画布渲染 → 手动编辑图层
- **JSON 编辑**：支持原始 JSON 粘贴与应用到画布

## 待实现

（暂无待实现项）

## 待实现（平台）

- **图层编辑增强**：支持更多属性（对齐、旋转、透明度、滤镜）
- **素材管理**：图片上传与素材库接入
- **模板保存**：保存与加载用户自定义模板
